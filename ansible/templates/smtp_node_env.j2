# Postfix Docker Configuration
# Generated by SMTP Master

# Main server hostname
HOSTNAME={{ inventory_hostname }}

# Primary domain for postfix
PRIMARY_DOMAIN={{ domains.split(',')[0] if domains is defined else inventory_hostname.split('.', 1)[1] }}

# All domains to handle, comma-separated
DOMAINS={{ domains | default(PRIMARY_DOMAIN) }}

# Networks allowed to relay mail
ADDITIONAL_NETWORKS={{ additional_networks | default('0.0.0.0/0') }}

# Email size limit in bytes
MESSAGE_SIZE_LIMIT={{ message_size_limit | default(default_message_size_limit) }}

# Postfix queue settings
MAXIMAL_QUEUE_LIFETIME={{ maximal_queue_lifetime | default(default_maximal_queue_lifetime) }}
BOUNCE_QUEUE_LIFETIME={{ bounce_queue_lifetime | default(default_bounce_queue_lifetime) }}

# DKIM settings
DKIM_SELECTOR={{ dkim_selector | default(default_dkim_selector) }}

# TLS/SSL settings
SSL_TYPE=self-signed

# Logging level
SMTP_LOG_LEVEL=2

# Database settings
DB_ROOT_PASSWORD={{ vault_db_root_password }}
DB_NAME=postfix
DB_USER=postfix
DB_PASSWORD={{ vault_db_password }}

# Enable database integration
USE_DB=true

# Database host
HOST_DB=mariadb